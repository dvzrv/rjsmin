.. copyright:
    Copyright 2011 - 2015
    AndrÃ© Malo or his licensors, as applicable

.. license:
    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

        http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.

:orphan:


====================
 rJSmin - Benchmark
====================

The following numbers have been measured with the bench package provided
in the source distribution. Since the numbers don't vary much between
python minor releases (e.g. 3.3 vs 3.4), only one benchmark per major
version is given below. The :file:`docs/BENCHMARKS` file in the source
distribution contains a more comprehensive list.

Here's the list of benchmarked implementations:

**Simple port**
  The original jsmin.py port by Baruch Even

**jsmin 2.0.9**
  A speed-refactored python port by Dave St.Germain. There are some
  spikes in lower Python 3 versions (especially for the big file
  [apiviewer.js]).

|**rjsmin**|
  this very project

**_**\ |**rjsmin**|
  The C reimplementation of |rjsmin|

Note that the various implementations produce output different from the
original jsmin.c for one reason or another. Also the simple port was
modified to use ``cStringIO`` if available (it's faster then) or io (for
python 3).

And here's a list of the benchmarked javascript files:

- apiviewer is a file from the qooxdoo framework. Very big and already
  compressed.
- bootstrap is the popular twitter toolkit, version 2.0.4
- jquery is jquery-1.7.1.js; the uncompressed development download.
- knockout is knockout-2.0.0.js, the compressed download.
- markermanager is the V3 port of the google maps markermanager.

Inside the parentheses are size information in KiB [#]_\.  The sign
behind the size value denotes the size difference in relation to the
simple port (i.e. jsmin itself).

.. [#] Bytes / 1024 for Python 2 and Code Points / 1024 for Python 3


.. begin tables

Python 3.5.0
~~~~~~~~~~~~

.. rst-class:: benchmark

+-----------------------+------------------------+----------------------+
| Name                  | apiviewer (953.2)      | bootstrap (49.0)     |
+=======================+========================+======================+
| Simple Port           |  3932.50 ms (951.5 \*) |  167.20 ms (26.4 \*) |
+-----------------------+------------------------+----------------------+
| jsmin 2.0.9           |  3732.05 ms (951.5 >)  |   67.05 ms (26.4 >)  |
+-----------------------+------------------------+----------------------+
| slimit 0.8.1          |                   n/a  |                 n/a  |
+-----------------------+------------------------+----------------------+
| slimit 0.8.1 (mangle) |                   n/a  |                 n/a  |
+-----------------------+------------------------+----------------------+
| |rjsmin|              |    95.30 ms (951.5 =)  |   23.36 ms (26.4 >)  |
+-----------------------+------------------------+----------------------+
| _\ |rjsmin|           |     2.95 ms (951.5 =)  |    0.27 ms (26.4 >)  |
+-----------------------+------------------------+----------------------+

.. rst-class:: benchmark

+-----------------------+------------------------+----------------------+
| Name                  | jquery (242.4)         | knockout (38.9)      |
+=======================+========================+======================+
| Simple Port           |   857.66 ms (135.9 \*) |  163.85 ms (38.6 \*) |
+-----------------------+------------------------+----------------------+
| jsmin 2.0.9           |   410.95 ms (136.8 >)  |   76.17 ms (38.6 >)  |
+-----------------------+------------------------+----------------------+
| slimit 0.8.1          |                   n/a  |                 n/a  |
+-----------------------+------------------------+----------------------+
| slimit 0.8.1 (mangle) |                   n/a  |                 n/a  |
+-----------------------+------------------------+----------------------+
| |rjsmin|              |   163.39 ms (135.9 =)  |    5.16 ms (38.6 >)  |
+-----------------------+------------------------+----------------------+
| _\ |rjsmin|           |     1.61 ms (135.9 =)  |    0.14 ms (38.6 >)  |
+-----------------------+------------------------+----------------------+

.. rst-class:: benchmark

+-----------------------+------------------------+----------------------+
| Name                  | markermanager (28.6)   |                      |
+=======================+========================+======================+
| Simple Port           |     82.12 ms (11.6 \*) |                      |
+-----------------------+------------------------+----------------------+
| jsmin 2.0.9           |     33.08 ms (11.6 >)  |                      |
+-----------------------+------------------------+----------------------+
| slimit 0.8.1          |                   n/a  |                      |
+-----------------------+------------------------+----------------------+
| slimit 0.8.1 (mangle) |                   n/a  |                      |
+-----------------------+------------------------+----------------------+
| |rjsmin|              |     10.00 ms (11.6 =)  |                      |
+-----------------------+------------------------+----------------------+
| _\ |rjsmin|           |      0.13 ms (11.6 =)  |                      |
+-----------------------+------------------------+----------------------+


Python 2.7.10
~~~~~~~~~~~~~

.. rst-class:: benchmark

+-----------------------+------------------------+----------------------+
| Name                  | apiviewer (953.2)      | bootstrap (49.0)     |
+=======================+========================+======================+
| Simple Port           |  4839.81 ms (951.5 \*) |  189.40 ms (26.4 \*) |
+-----------------------+------------------------+----------------------+
| jsmin 2.0.9           |  4238.41 ms (951.5 >)  |   83.25 ms (26.4 >)  |
+-----------------------+------------------------+----------------------+
| slimit 0.8.1          |                   n/a  |                 n/a  |
+-----------------------+------------------------+----------------------+
| slimit 0.8.1 (mangle) |                   n/a  |                 n/a  |
+-----------------------+------------------------+----------------------+
| |rjsmin|              |    91.59 ms (951.5 =)  |   21.45 ms (26.4 >)  |
+-----------------------+------------------------+----------------------+
| _\ |rjsmin|           |     2.87 ms (951.5 =)  |    0.26 ms (26.4 >)  |
+-----------------------+------------------------+----------------------+

.. rst-class:: benchmark

+-----------------------+------------------------+----------------------+
| Name                  | jquery (242.4)         | knockout (38.9)      |
+=======================+========================+======================+
| Simple Port           |  1007.70 ms (135.9 \*) |  193.50 ms (38.6 \*) |
+-----------------------+------------------------+----------------------+
| jsmin 2.0.9           |   489.97 ms (136.8 >)  |   86.68 ms (38.6 >)  |
+-----------------------+------------------------+----------------------+
| slimit 0.8.1          |                   n/a  |                 n/a  |
+-----------------------+------------------------+----------------------+
| slimit 0.8.1 (mangle) |                   n/a  |                 n/a  |
+-----------------------+------------------------+----------------------+
| |rjsmin|              |   149.72 ms (135.9 =)  |    4.69 ms (38.6 >)  |
+-----------------------+------------------------+----------------------+
| _\ |rjsmin|           |     1.50 ms (135.9 =)  |    0.14 ms (38.6 >)  |
+-----------------------+------------------------+----------------------+

.. rst-class:: benchmark

+-----------------------+------------------------+----------------------+
| Name                  | markermanager (28.6)   |                      |
+=======================+========================+======================+
| Simple Port           |     91.69 ms (11.6 \*) |                      |
+-----------------------+------------------------+----------------------+
| jsmin 2.0.9           |     42.46 ms (11.6 >)  |                      |
+-----------------------+------------------------+----------------------+
| slimit 0.8.1          |                   n/a  |                      |
+-----------------------+------------------------+----------------------+
| slimit 0.8.1 (mangle) |                   n/a  |                      |
+-----------------------+------------------------+----------------------+
| |rjsmin|              |      9.43 ms (11.6 =)  |                      |
+-----------------------+------------------------+----------------------+
| _\ |rjsmin|           |      0.11 ms (11.6 =)  |                      |
+-----------------------+------------------------+----------------------+

.. end tables


.. vim: ft=rest tw=72
